<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Quiz adaptable</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 20px;
    }
    img {
      max-width: 300px;
      height: auto;
      margin: 20px 0;
    }
    .btn {
      padding: 10px 20px;
      margin: 10px;
      font-size: 16px;
      cursor: pointer;
    }
    #respuestas {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
    }
    #botonEscurridizo {
      position: absolute;
      transition: all 0.3s ease;
    }
  </style>
</head>
<body>

  <h1 id="pregunta"></h1>
  <img id="imagen" src="" alt="">
  <div id="respuestas"></div>

  <script>
    const preguntas = [
      {
        texto: "¿Qué fruta es esta?",
        imagen: "IMG/sticker_cata.png",
        opciones: ["Manzana", "Pera"]
      },
      {
        texto: "¿Qué animal es este?",
        imagen: "IMG/sticker_cata.png",
        opciones: ["León", "Tigre", "Pantera", "Gato"]
      },
      {
        texto: "¿Qué edificio es este?",
        imagen: "IMG/sticker_cata.png",
        opciones: ["Torre Eiffel", "Empire State"]
      },
      {
        texto: "¿Quieres pololear conmigo?",
        imagen: "IMG/sticker_cata.png",
        opciones: ["Si", "No"],
        esFinal: true
      }
    ];

    let indice = 0;

    function cargarPregunta() {
      const p = preguntas[indice];
      document.getElementById("pregunta").textContent = p.texto;
      document.getElementById("imagen").src = p.imagen;

      const contenedor = document.getElementById("respuestas");
      contenedor.innerHTML = ""; // Limpiar botones

      if (p.esFinal) {
        // Botón normal
        const btnFinal = document.createElement("button");
        btnFinal.className = "btn";
        btnFinal.textContent = p.opciones[0];
        btnFinal.onclick = () => mostrarImagenFinal();
        contenedor.appendChild(btnFinal);

        // Botón escurridizo
        const btnLoco = document.createElement("button");
        btnLoco.className = "btn";
        btnLoco.id = "botonEscurridizo";
        btnLoco.textContent = p.opciones[1];
        btnLoco.onclick = moverBoton;
        document.body.appendChild(btnLoco);
        moverBoton(); // Inicializar posición
      } else {
        p.opciones.forEach((opcion, i) => {
          const btn = document.createElement("button");
          btn.className = "btn";
          btn.textContent = opcion;
          btn.onclick = () => responder(i);
          contenedor.appendChild(btn);
        });

        // Asegurar que el botón escurridizo no quede en pantalla
        const btnLoco = document.getElementById("botonEscurridizo");
        if (btnLoco) btnLoco.remove();
      }
    }

    function responder(index) {
      indice++;
      if (indice < preguntas.length) {
        cargarPregunta();
      } else {
        mostrarImagenFinal();
      }
    }

    function mostrarImagenFinal() {
      document.body.innerHTML = `
        <img src="IMG/final.jpg" alt="Final" style="max-width: 100%;">
        <h2>¡Gracias por jugar!</h2>
      `;
    }

    function moverBoton() {
      const btn = document.getElementById("botonEscurridizo");
      const maxX = window.innerWidth - btn.offsetWidth;
      const maxY = window.innerHeight - btn.offsetHeight;
      const x = Math.floor(Math.random() * maxX);
      const y = Math.floor(Math.random() * maxY);
      btn.style.left = x + "px";
      btn.style.top = y + "px";
    }

    cargarPregunta();
  </script>

</body>
</html>
